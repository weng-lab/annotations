{% import '_helpers.html' as hh -%}

{% include '_header.html' -%}

<nav class="navbar navbar-default" id="navbar-main" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://www.encodeproject.org/data/annotations/">&#60; ENCODE Annotations</a>

      <a class="navbar-brand" id="navbar-brand-center" href="#">Annotated Genomic Regions</a>

    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-8">
      <div class="jumbotron" id="jumboHeader">
        <h3 style="margin-top: 0px;">Candidate enhancers based on DNase and H3K27ac signals</h3>
        <p>DNase hypersensitivity and histone modification H3K27ac are well-known indicators of enhancer function. We have developed an unsupervised method that combines DNase and H3K27ac signals in the same cell type to predict enhancers. When tested on mouse transgenic assays, our method shows higher accuracy than DNase and H3K27ac individually. We have applied this method to 45 human cell types and 20 mouse cell types with both DNase and H3K27ac data generated by the ENCODE and Roadmap Epigenomic consortia. You can query these enhancers by genomic locations, nearby genes, or SNPs.
      </div>

      <div class="alert alert-warning alert-dismissible" role="alert" style="display: none" id="errBox">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>Warning!</strong> <span id="errMsg"></span>
      </div>

    </div>
    <div class="col-md-4">
      <img src="static/sample-image-v5.png" style="padding-top: 20px;">
    </div>
  </div>

  <a href="#search"></a>
  <span id="searchTitle"><p>Search Candidate Enhancers</span>

  <form id="searchForm">
    <div class="row">
      <div class="col-md-2">
        <button class="btn btn-warning" type="button">
          <span class="badge">1</span>&nbsp;Select genome
        </button>
      </div>
      <div class="col-md-8">
        {% include '_genome_buttons.html' -%}
      </div>
    </div>

    <div class="row">
      <div class="col-md-2">
        <br>
        <button class="btn btn-warning" type="button">
          <span class="badge">2</span>&nbsp;Enter gene, SNP,<br>coordinate, or rank
        </button>
      </div>
      <div class="col-md-8">
        <br>
        <input type="text" name="loci" id="lociSearchBox" value="{{defaults["mm10"]["pos"]}}">
        <br>
        {% include "_examples.html" -%}
        <br>
      </div>
    </div>

    <div class="row">
      <div class="col-md-2">
      </div>
      <div class="col-md-8">
        {% include "_cell_type_buttons.html" -%}
      </div>
    </div>

    <div class="row">
      <div class="col-md-2">
        <button class="btn btn-warning" type="button">
          <span class="badge">3</span>&nbsp;Select assays<br>and cell types
        </button>
      </div>
      <div class="col-md-10">
        <div style="display: inline-block;">
          {% include "_cell_type_tables.html" -%}
        </div>
        <div style="display: inline-block;">
          <button class="btn btn-warning" type="button">
            <span class="badge">4</span>&nbsp;Open Genome<br>Browser
          </button>
          <input role="button" class="btn btn-success" type="submit" value="Visualize">
        </div>

      </div>
    </div>
  </form>
</div>

<br>

<script src="static/tablesort.min.js"></script>
<script>
  var selectorNames = {{epigenomes.SelectorNames()}};
  var annotationDefaults = {{defaults.json()}};
  {% include 'js.js' -%}
</script>
<script src="static/jquery.serialize-object.min.js"></script>

{% include '_footer.html' -%}
